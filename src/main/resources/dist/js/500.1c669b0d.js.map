{"version":3,"file":"js/500.1c669b0d.js","mappings":"sMAEO,SAASA,EAAgBC,GAC5B,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,yBACLC,OAAQ,MACRH,UAER,C,iFC8CA,MAAMI,GAAQC,EAAAA,EAAAA,IAAS,CACnBC,OAAQ,GACRC,UAAW,GACXC,QAAS,EACTC,KAAM,GACNC,MAAO,IAGDC,EAAS,CACf,CAACC,KAAK,KAAMC,UAAS,EAAMC,MAAM,eAAgBC,MAAM,SAAUC,MAAM,KAAMC,UAAU,GACvF,CAACL,KAAK,gBAAiBC,UAAS,EAAMC,MAAM,kBAAmBC,MAAM,OAAQC,MAAM,gBAAiBC,UAAU,EAAMC,OAAQC,GAAOC,EAAAA,GAAAA,WAAgBD,EAAK,eACxJ,CAACP,KAAK,SAAUC,UAAS,EAAMC,MAAM,SAAUC,MAAM,OAAQC,MAAM,SAAUC,UAAU,GACvF,CAACL,KAAK,WAAYC,UAAS,EAAMC,MAAM,WAAYC,MAAM,OAAQC,MAAM,WAAYC,UAAU,GAC7F,CAACL,KAAK,UAAWC,UAAS,EAAMC,MAAM,gBAAiBC,MAAM,OAAQC,MAAM,UAAWC,UAAU,GAChG,CAACL,KAAK,eAAgBC,UAAS,EAAMC,MAAM,iBAAkBC,MAAM,OAAQC,MAAM,eAAgBC,UAAU,EAAMC,OAAQC,GAAOC,EAAAA,GAAAA,WAAgBD,EAAK,eACrJ,CAACP,KAAK,QAASC,UAAS,EAAMC,MAAM,kBAAmBC,MAAM,OAAQC,MAAM,QAASC,UAAU,GAC9F,CAACL,KAAK,YAAaC,UAAS,EAAMC,MAAM,YAAaC,MAAM,OAAQC,MAAM,YAAaC,UAAU,GAChG,CAACL,KAAK,QAASC,UAAS,EAAMC,MAAM,kBAAmBC,MAAM,OAAQC,MAAM,QAASC,UAAU,IAGxFI,GAAUC,EAAAA,EAAAA,KAAI,GACdC,GAAaD,EAAAA,EAAAA,IAAI,CAACE,OAAQ,SAAUC,YAAY,EAAOC,KAAM,EAAGC,YAAa,KAE7EC,EAAqBA,KACvBP,EAAQQ,OAAQ,EAChB,MAAM7B,EAAS,CACXM,OAAQF,EAAME,OACdG,KAAML,EAAMK,KACZqB,YAAaP,EAAWM,MAAMH,MAGlC3B,EAAgBC,GAAQ+B,MAAMC,IAC1BX,EAAQQ,OAAQ,EACbG,EAAIC,QACH7B,EAAMG,UAAYyB,EAAIE,KAAKC,QAC3B/B,EAAMM,MAAQsB,EAAIE,KAAKxB,QAEvB0B,EAAAA,EAAAA,IAASJ,EAAIK,IACjB,IAEHC,OAAM,KACHjB,EAAQQ,OAAQ,CAAK,GACvB,EAEAU,EAAaC,IACnB,MAAM,KAAEd,EAAI,YAAEC,EAAW,OAAEH,EAAM,WAAEC,GAAee,EAAMjB,WACxDA,EAAWM,MAAML,OAASA,GAAU,GACpCD,EAAWM,MAAMJ,WAAaA,EAC9BF,EAAWM,MAAMH,KAAOA,EACxBH,EAAWM,MAAMF,YAAcA,EAE/BvB,EAAMI,QAAUkB,EAChBtB,EAAMK,KAAOkB,EACbc,QAAQC,IAAI,0BACZD,QAAQC,IAAItC,GACZwB,GAAoB,E,OAItBe,EAAAA,EAAAA,KAAU,KACRf,IACAa,QAAQC,IAAI,iBACZD,QAAQC,IAAItC,EAAM,I,0rDCjHtB,MAAMwC,EAAc,EAEpB,QAUA,IAAS,EAAQ,aAAc,CAACC,QAAO,mBAAe,WAAO,WAAO,UAAM,QAAI,SAAK,gBAAY,K","sources":["webpack://quasardesign/./src/api/pedidos/pedidos.js","webpack://quasardesign/./src/views/pedidos/index.vue","webpack://quasardesign/./src/views/pedidos/index.vue?1f3a"],"sourcesContent":["import request from \"../../utils/request\";\r\n\r\nexport function getPedidosTable(params){\r\n    return request({\r\n        url: '/api/sys/pedidos/table',\r\n        method: 'get',\r\n        params\r\n    })\r\n}","<template>\r\n    <q-layout view=\"hHh lpR fFf\">\r\n      <q-page-container>       \r\n        <div class=\"q-pa-md\">\r\n          <q-table\r\n          color=\"primary\"\r\n      card-class=\"bg-amber-5 text-brown\"\r\n      table-class=\"text-grey-8\"\r\n      table-header-class=\"text-brown\"\r\n            flat\r\n            bordered\r\n            ref=\"tableRef\"\r\n            title=\"Pedidos\"\r\n            :rows=\"state.tableData\"\r\n            :columns=\"columns\"\r\n            row-key=\"Pedido\"\r\n            v-model:pagination=\"pagination\"\r\n            :loading=\"loading\"\r\n            :filter=\"state.blurry\"\r\n            binary-state-sort\r\n            @request=\"onRequest\"\r\n           \r\n          >\r\n            <template v-slot:top-right>\r\n              <q-input borderless dense debounce=\"300\" v-model=\"state.blurry\" placeholder=\"Buscar\">\r\n                <template v-slot:append>\r\n                  <q-icon name=\"search\" @click=\"getPedidosTableFun\" />\r\n                </template>\r\n              </q-input>\r\n            </template>\r\n            <template v-slot:body-cell-actions=\"props\">\r\n              <q-td :props=\"props\">\r\n                <q-btn @click=\"onEdit(props.row)\" fab-mini dense square outline icon=\"mode_edit\" color=\"primary\" aria-label=\"Edit\" class=\"q-mr-sm\" />\r\n                <q-btn @click=\"onDelete(props.row)\" fab-mini dense square outline icon=\"delete\" color=\"negative\" aria-label=\"Delete\" />\r\n              </q-td>\r\n            </template>\r\n\r\n          </q-table>\r\n          <q-pagination\r\n            v-model=\"pagination.page\"\r\n            :max=\"Math.ceil(state.total / pagination.rowsPerPage)\" \r\n            @update:model-value=\"getPedidosTableFun\"\r\n          />\r\n        </div>\r\n      </q-page-container>\r\n    </q-layout>\r\n  </template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue';\r\nimport {  getPedidosTable } from '../../api/pedidos/pedidos';\r\nimport { errorMsg } from '../../utils/message';\r\nimport { date } from 'quasar';\r\n\r\nconst state = reactive({\r\n    blurry: '',\r\n    tableData: [],\r\n    current: 1,\r\n    size: 10,\r\n    total: 0\r\n});\r\n\r\n    const columns =[ \r\n    {name:'Nº', required:true, label:'Id de pedido', align:'center', field:'Nº', sortable: true},\r\n    {name:'Fechadepedido', required:true, label:'Fecha de pedido', align:'left', field:'Fechadepedido', sortable: true, format: val => date.formatDate(val, 'DD-MM-YYYY')},\r\n    {name:'estado', required:true, label:'Estado', align:'left', field:'estado', sortable: true},\r\n    {name:'Vendedor', required:true, label:'Vendedor', align:'left', field:'Vendedor', sortable: true},\r\n    {name:'Cliente', required:true, label:'Id de cliente', align:'left', field:'Cliente', sortable: true},\r\n    {name:'Fechadeenvio', required:true, label:'Fecha de envio', align:'left', field:'Fechadeenvio', sortable: true, format: val => date.formatDate(val, 'DD-MM-YYYY')},\r\n    {name:'Envío', required:true, label:'Gastos de envio', align:'left', field:'Envío', sortable: true},\r\n    {name:'impuestos', required:true, label:'Impuestos', align:'left', field:'impuestos', sortable: true},\r\n    {name:'Total', required:true, label:'Total de pedido', align:'left', field:'Total', sortable: true}\r\n    ];\r\n\r\n    const loading = ref(false);\r\n    const pagination = ref({sortBy: 'nombre', descending: false, page: 1, rowsPerPage: 10,});\r\n\r\n    const getPedidosTableFun = () =>{\r\n        loading.value = true;\r\n        const params = {\r\n            blurry: state.blurry,\r\n            size: state.size,\r\n            currentPage: pagination.value.page\r\n        };\r\n\r\n        getPedidosTable(params).then((res) => {\r\n            loading.value = false;\r\n            if(res.succes) {\r\n                state.tableData = res.data.records;\r\n                state.total = res.data.total;\r\n            } else {\r\n                errorMsg(res.msg);\r\n            }\r\n        })\r\n        .catch(() =>{\r\n            loading.value = false;\r\n        });\r\n    };\r\n    const onRequest = (props) => {\r\n    const { page, rowsPerPage, sortBy, descending } = props.pagination;\r\n    pagination.value.sortBy = sortBy || '';\r\n    pagination.value.descending = descending;\r\n    pagination.value.page = page;\r\n    pagination.value.rowsPerPage = rowsPerPage;\r\n  \r\n    state.current = page; // Actualiza el estado actual\r\n    state.size = rowsPerPage; // Actualiza el tamaño de la página\r\n    console.log('estado current cliente');\r\n    console.log(state);\r\n    getPedidosTableFun();\r\n    \r\n  };\r\n  \r\n  onMounted(() => {\r\n    getPedidosTableFun();\r\n    console.log('estado pedido');\r\n    console.log(state);\r\n  });\r\n</script>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport QTable from 'quasar/src/components/table/QTable.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QTd from 'quasar/src/components/table/QTd.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QPagination from 'quasar/src/components/pagination/QPagination.js';\nimport qInstall from \"../../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(script, 'components', {QLayout,QPageContainer,QTable,QInput,QIcon,QTd,QBtn,QPagination});\n"],"names":["getPedidosTable","params","request","url","method","state","reactive","blurry","tableData","current","size","total","columns","name","required","label","align","field","sortable","format","val","date","loading","ref","pagination","sortBy","descending","page","rowsPerPage","getPedidosTableFun","value","currentPage","then","res","succes","data","records","errorMsg","msg","catch","onRequest","props","console","log","onMounted","__exports__","QLayout"],"sourceRoot":""}