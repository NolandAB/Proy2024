"use strict";(self["webpackChunkquasardesign"]=self["webpackChunkquasardesign"]||[]).push([[586],{655:function(e,a,t){t.d(a,{D3:function(){return l},Hz:function(){return s},hh:function(){return r},mg:function(){return n},yH:function(){return o}});var u=t(6381);function r(e){return(0,u.A)({url:"/api/sys/role/table",method:"get",params:e})}function l(e){return(0,u.A)({url:"/api/sys/role/edit",method:"post",data:e})}function n(e){return(0,u.A)({url:"/api/sys/role/menu/edit",method:"post",data:e})}function o(e){return(0,u.A)({url:"/api/sys/role/del",method:"delete",params:e})}function s(e){return(0,u.A)({url:"/api/sys/role/menu/list",method:"get",params:e})}},9586:function(e,a,t){t.r(a),t.d(a,{default:function(){return i}});t(4645),t(9063),t(988);var u=t(4220),r=t(3503),l=t(655),n=t(7939),o=t(6732),s={__name:"authorizeRole",props:{authVisible:{type:Boolean,require:!0,default:!1},roleId:Number},emits:["update:authVisible"],setup(e,{emit:a}){const t=e,s=a,d=(0,u.EW)({get:()=>t.authVisible,set:e=>s("update:authVisible",e)}),i=(0,o.KR)(!1),c=(0,o.KR)(),h=(0,o.Kh)({treeData:[],authorizeData:[],defaultProps:{children:"children",label:"name"}}),p=()=>{i.value=!1,h.authorizeData=[],m()},f=()=>{(0,r.Yd)({}).then((e=>{e.success?h.treeData=e.data:(0,n.aJ)(e.msg)}))},m=()=>{(0,l.Hz)({roleId:t.roleId}).then((e=>{e.success?(e.data&&e.data.length>0&&e.data.forEach((e=>{h.authorizeData.push(e.menuId)})),setTimeout((()=>{f()}),10)):(0,n.aJ)(e.msg)}))},g=()=>{i.value=!0,(0,l.mg)({roleId:t.roleId,menuIds:c.value.getCheckedKeys()}).then((e=>{e.success?((0,n.j3)(e.data),d.value=!1):(0,n.aJ)(e.msg),i.value=!1}))};return(e,a)=>{const t=(0,u.g2)("el-tree"),r=(0,u.g2)("el-button"),l=(0,u.g2)("el-dialog");return(0,u.uX)(),(0,u.Wv)(l,{title:"Autorizar",modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=e=>d.value=e),draggable:"","close-on-click-modal":!1,onOpened:p},{footer:(0,u.k6)((()=>[(0,u.Lk)("span",null,[(0,u.bF)(r,{onClick:a[0]||(a[0]=e=>d.value=!1)},{default:(0,u.k6)((()=>a[2]||(a[2]=[(0,u.eW)("Cancelar")]))),_:1}),(0,u.bF)(r,{type:"primary",loading:i.value,onClick:g},{default:(0,u.k6)((()=>a[3]||(a[3]=[(0,u.eW)("Autorizar")]))),_:1},8,["loading"])])])),default:(0,u.k6)((()=>[(0,u.bF)(t,{data:h.treeData,ref_key:"tree",ref:c,"show-checkbox":"","node-key":"id",props:h.defaultProps,"default-expand-all":"","default-checked-keys":h.authorizeData},null,8,["data","props","default-checked-keys"])])),_:1},8,["modelValue"])}}};const d=s;var i=d}}]);
//# sourceMappingURL=586.3aa229b1.js.map