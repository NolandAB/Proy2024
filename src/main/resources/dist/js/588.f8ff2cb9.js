"use strict";(self["webpackChunkquasardesign"]=self["webpackChunkquasardesign"]||[]).push([[70,588],{655:function(e,l,r){r.d(l,{D3:function(){return a},Hz:function(){return d},hh:function(){return u},mg:function(){return t},yH:function(){return s}});var o=r(6381);function u(e){return(0,o.A)({url:"/api/sys/role/table",method:"get",params:e})}function a(e){return(0,o.A)({url:"/api/sys/role/edit",method:"post",data:e})}function t(e){return(0,o.A)({url:"/api/sys/role/menu/edit",method:"post",data:e})}function s(e){return(0,o.A)({url:"/api/sys/role/del",method:"delete",params:e})}function d(e){return(0,o.A)({url:"/api/sys/role/menu/list",method:"get",params:e})}},588:function(e,l,r){r.r(l),r.d(l,{default:function(){return c}});r(6029);var o=r(4220),u=r(6732),a=r(9798),t=r(1571),s=r(655),d=r(7939),n=r(7251),i={__name:"editUser",props:{dialogVisible:{type:Boolean,required:!0,default:!1},userObj:Object},emits:["update:dialogVisible","get-list"],setup(e,{emit:l}){const r=e,i=l,m=(0,o.EW)({get:()=>r.dialogVisible,set:e=>i("update:dialogVisible",e)}),p=(0,u.KR)(!1),c=(0,u.KR)(),g=(0,u.Kh)({title:"Nuevo",userForm:{id:null,username:"",nickName:"",roleIds:[]},rules:{username:[{required:!0,message:"El nombre de usuario no puede estar vacío",trigger:"blur"}],nickName:[{required:!0,message:"El apodo del usuario no puede estar vacío",trigger:"blur"}],roleIds:[{required:!0,message:"El rol de usuario no puede estar vacío",trigger:"change"}]},roleList:[]}),b=()=>{(0,n.E)(c.value),g.title="Nuevo",f(),p.value=!1,r.userObj.id&&(g.title="Editar",g.userForm=r.userObj,g.userForm.roleIds=g.userForm.roleIds[0].split(","),g.userForm.roleIds=g.userForm.roleIds.map(Number))},f=()=>{(0,s.hh)({}).then((e=>{e.success?g.roleList=e.data:(0,d.aJ)(e.msg)}))},F=()=>{console.log("INSERTAR"),c.value.validate((e=>{e&&(p.value=!0,(0,t.gw)(g.userForm).then((e=>{e.success?((0,d.j3)(e.data),console.log(e.data),m.value=!1,i("get-list")):(0,d.aJ)(e.msg),p.value=!1})))}))};return(e,l)=>{const r=(0,o.g2)("el-input"),t=(0,o.g2)("el-form-item"),s=(0,o.g2)("el-option"),d=(0,o.g2)("el-select"),i=(0,o.g2)("el-form"),f=(0,o.g2)("el-button"),v=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.Wv)(v,{title:g.title,modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=e=>m.value=e),"close-on-click-modal":!1,onOpened:b},{footer:(0,o.k6)((()=>[(0,o.Lk)("span",null,[(0,o.bF)(f,{onClick:l[4]||(l[4]=e=>(0,u.R1)(n.E)(c.value))},{default:(0,o.k6)((()=>l[6]||(l[6]=[(0,o.eW)("reiniciar")]))),_:1}),(0,o.bF)(f,{type:"primary",loading:p.value,onClick:F},{default:(0,o.k6)((()=>l[7]||(l[7]=[(0,o.eW)("seguro")]))),_:1},8,["loading"])])])),default:(0,o.k6)((()=>[(0,o.bF)(i,{model:g.userForm,rules:g.rules,ref_key:"userRef",ref:c,"label-width":"120px"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(t,{prop:"id"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{modelValue:g.userForm.id,"onUpdate:modelValue":l[0]||(l[0]=e=>g.userForm.id=e)},null,8,["modelValue"])])),_:1},512),[[a.aG,!1]]),(0,o.bF)(t,{label:"nombre de usuario",prop:"username"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{modelValue:g.userForm.username,"onUpdate:modelValue":l[1]||(l[1]=e=>g.userForm.username=e),placeholder:"Por favor ingrese el nombre de usuario"},null,8,["modelValue"])])),_:1}),(0,o.bF)(t,{label:"Apoodo",prop:"nickName"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{modelValue:g.userForm.nickName,"onUpdate:modelValue":l[2]||(l[2]=e=>g.userForm.nickName=e),placeholder:"Por favor ingresa un apodo"},null,8,["modelValue"])])),_:1}),(0,o.bF)(t,{label:"rol de usuario",prop:"roleIds"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:g.userForm.roleIds,"onUpdate:modelValue":l[3]||(l[3]=e=>g.userForm.roleIds=e),multiple:"",placeholder:"Por favor seleccione un rol"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(g.roleList,((e,l)=>((0,o.uX)(),(0,o.Wv)(s,{key:l,label:e.roleName,value:parseInt(e.id)},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}}},m=r(1317);const p=(0,m.A)(i,[["__scopeId","data-v-a24c4b0e"]]);var c=p}}]);
//# sourceMappingURL=588.f8ff2cb9.js.map