{"version":3,"file":"js/66.2725ac3e.js","mappings":"0TAuCA,MAAMA,GAAQC,EAAAA,EAAAA,IAAS,CACrBC,OAAQ,GACRC,UAAW,GACXC,WAAY,CAAC,EACbC,QAAS,EACTC,KAAM,GACNC,MAAO,IAGHC,GAAgBC,EAAAA,EAAAA,KAAI,IAE1BC,EAAAA,EAAAA,KAAU,KACRC,GAAoB,IAKtB,MAAMA,EAAqBA,KACzB,MAAMC,EAAS,CACbV,OAAQF,EAAME,OACdI,KAAMN,EAAMM,KACZO,YAAab,EAAMK,UAEnBS,EAAAA,EAAAA,GAAgBF,GAAQG,MAAKC,IACzBA,EAAIC,SACNjB,EAAMG,UAAYa,EAAIE,KAAKC,QAC3BnB,EAAMO,MAAQS,EAAIE,KAAKX,QAEvBa,EAAAA,EAAAA,IAASJ,EAAIK,IACf,GACA,E,irCC/DJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,QAQA,IAAS,EAAQ,aAAc,CAACC,QAAO,mBAAe,UAAM,WAAO,SAAK,WAAO,K","sources":["webpack://quasardesign/./src/views/clientes/index2.vue","webpack://quasardesign/./src/views/clientes/index2.vue?deb5"],"sourcesContent":["<template>\r\n  <q-layout view=\"hHh lpR fFf\">\r\n    <q-page-container>\r\n      <q-page class=\"q-pa-md\">\r\n        <div class=\"searchDiv q-gutter-sm row items-center\">\r\n          <q-input class=\"searchInput\" v-model=\"state.blurry\" placeholder=\"Ingrese nombre o ID de cliente\" clearable />\r\n          <q-btn label=\"Consultas\" color=\"primary\" @click=\"getClientesListFun\" />\r\n          <q-btn v-if=\"hasPer('clientes:add')\" label=\"Nuevo Cliente\" color=\"primary\" @click=\"editClienteFun\" class=\"q-ml-auto\" />\r\n        </div>\r\n\r\n        <q-table\r\n          :rows=\"state.tableData\"\r\n          row-key=\"id\"\r\n          class=\"q-mt-md\"\r\n          :row-key=\"name\"\r\n          rows-per-page-label=\"Paginas:\"\r\n        >\r\n          \r\n        </q-table>\r\n        \r\n      \r\n    <!--editar-->\r\n\r\n        <!-- Componente de edición de cliente -->\r\n        <edit-cliente v-model:dialog-visible=\"dialogVisible\" :cliente-obj=\"state.clientesObj\" @get-list=\"getClientesListFun\"></edit-cliente>\r\n        \r\n      </q-page>\r\n    </q-page-container>\r\n    \r\n  </q-layout>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue';\r\nimport { getClientesList } from '../../api/clientes/clientes'; // API de clientes\r\nimport { errorMsg, infoMsg, successMsg } from '../../utils/message';\r\nimport { hasPer } from '../../utils/common'; // Para validar permisos\r\nimport { Dialog } from 'quasar';\r\n\r\nconst state = reactive({\r\n  blurry: '',\r\n  tableData: [], // Asegúrate de inicializarlo como un array vacío\r\n  clienteObj: {},\r\n  current: 1,\r\n  size: 10,\r\n  total: 0\r\n});\r\n\r\nconst dialogVisible = ref(false);\r\n\r\nonMounted(() => {\r\n  getClientesListFun();\r\n});\r\n\r\n// Obtener la lista de clientes\r\n\r\nconst getClientesListFun = () => {\r\n  const params = {\r\n    blurry: state.blurry,\r\n    size: state.size,\r\n    currentPage: state.current\r\n  }\r\n    getClientesList(params).then(res => {\r\n    if (res.success) {\r\n      state.tableData = res.data.records; // Asegúrate de que res.data sea un array\r\n      state.total = res.data.total\r\n    } else {\r\n      errorMsg(res.msg);\r\n    }\r\n  });\r\n};\r\n\r\n// Eliminar cliente\r\nconst delClienteFun = (id, name) => {\r\n  Dialog.create({\r\n    title: 'Confirmación',\r\n    message: `¿Estás seguro de eliminar el cliente ${name}?`,\r\n    cancel: true,\r\n    persistent: true\r\n  }).onOk(() => {\r\n    delCliente({ id }).then(res => {\r\n      if (res.success) {\r\n        successMsg(res.data);\r\n        getClientesListFun();\r\n      } else {\r\n        errorMsg(res.msg);\r\n      }\r\n    });\r\n  }).onCancel(() => {\r\n    infoMsg('Operación cancelada');\r\n  });\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.searchDiv {\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n","import script from \"./index2.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index2.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index2.vue?vue&type=style&index=0&id=284ccadb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-284ccadb\"]])\n\nexport default __exports__\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QTable from 'quasar/src/components/table/QTable.js';\nimport qInstall from \"../../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(script, 'components', {QLayout,QPageContainer,QPage,QInput,QBtn,QTable});\n"],"names":["state","reactive","blurry","tableData","clienteObj","current","size","total","dialogVisible","ref","onMounted","getClientesListFun","params","currentPage","getClientesList","then","res","success","data","records","errorMsg","msg","__exports__","QLayout"],"sourceRoot":""}