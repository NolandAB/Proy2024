"use strict";(self["webpackChunkquasardesign"]=self["webpackChunkquasardesign"]||[]).push([[790],{6790:function(e,t,o){o.r(t),o.d(t,{default:function(){return U}});o(4645);var a=o(4220),n=o(6732),r=o(9216),i=o(9538),l=o(6381);function s(e){return(0,l.A)({url:"/api/auth/login",method:"post",data:e})}function u(e){return(0,l.A)({url:"/api/auth/code",method:"get",params:e})}var d=o(7939);const c={style:{display:"flex","justify-content":"space-between","align-items":"center"},class:"q-mb-md"};var m={__name:"login",setup(e){const t=(0,r.P)(),o=(0,n.KR)(!0),l=(0,n.KR)(!1),m=(0,n.Kh)({image:""}),v=(0,n.Kh)({username:"",password:"",code:"",uuid:""});(0,a.sV)((()=>{g()}));const g=()=>{u().then((e=>{m.image=e.img,v.uuid=e.uuid}))},p=()=>{v.username&&v.password&&v.code&&(l.value=!0,s(v).then((e=>{e.success?(t.token=e.data.token,t.refreshToken=e.data.refreshToken,t.userInfo=e.data.userDto,i.A.push({path:"/Layout"})):(0,d.aJ)(e.msg),l.value=!1})))};return(e,t)=>{const n=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-input"),s=(0,a.g2)("q-img"),u=(0,a.g2)("q-btn"),d=(0,a.g2)("q-form"),f=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:o.value,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"q-mb-md",style:{"min-width":"300px","max-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(n,null,{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text-h6"},"Gestion 2024",-1),(0,a.Lk)("div",{class:"text-h6"},"Inicio de Sesion de Usuario",-1)]))),_:1})])),_:1}),(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{onSubmit:p},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:v.username,"onUpdate:modelValue":t[0]||(t[0]=e=>v.username=e),label:"Nombre de usuario",rules:[e=>!!e||"El nombre de usuario no puede estar vacío"],"prepend-icon":"person",class:"q-mb-md"},null,8,["modelValue","rules"]),(0,a.bF)(i,{modelValue:v.password,"onUpdate:modelValue":t[1]||(t[1]=e=>v.password=e),type:"password",label:"Contraseña",rules:[e=>!!e||"La contraseña no puede estar vacía"],"prepend-icon":"lock",class:"q-mb-md"},null,8,["modelValue","rules"]),(0,a.Lk)("div",c,[(0,a.bF)(i,{modelValue:v.code,"onUpdate:modelValue":t[2]||(t[2]=e=>v.code=e),label:"Código de verificación",rules:[e=>!!e||"El código de verificación no puede estar vacío"],"prepend-icon":"fingerprint",style:{width:"70%"}},null,8,["modelValue","rules"]),(0,a.bF)(s,{src:m.image,onClick:g,class:"cursor-pointer",style:{width:"30%"}},null,8,["src"])]),(0,a.bF)(u,{type:"submit",label:"Acceso",color:"primary",loading:l.value,class:"full-width"},null,8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},v=o(1317),g=o(5704),p=o(3663),f=o(7180),h=o(9140),b=o(5471),y=o(1952),q=(0,h.a0)({name:"QBanner",props:{...b.C,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=(0,a.nI)(),n=(0,b.A)(e,o),r=(0,a.EW)((()=>"q-banner row items-center"+(!0===e.dense?" q-banner--dense":"")+(!0===n.value?" q-banner--dark q-dark":"")+(!0===e.rounded?" rounded-borders":""))),i=(0,a.EW)((()=>"q-banner__actions row items-center justify-end col-"+(!0===e.inlineActions?"auto":"all")));return()=>{const o=[(0,a.h)("div",{class:"q-banner__avatar col-auto row items-center self-start"},(0,y.zm)(t.avatar)),(0,a.h)("div",{class:"q-banner__content col text-body2"},(0,y.zm)(t.default))],n=(0,y.zm)(t.action);return void 0!==n&&o.push((0,a.h)("div",{class:i.value},n)),(0,a.h)("div",{class:r.value+(!1===e.inlineActions&&void 0!==n?" q-banner--top-padding":""),role:"alert"},o)}}}),S=(o(9063),o(3665),o(9500),o(5055)),_=o(5139),k=o(3430),w=o(3246),A=(0,h.a0)({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:o}){const r=(0,a.nI)(),i=(0,n.KR)(null);let l=0;const s=[];function u(t){const a="boolean"===typeof t?t:!0!==e.noErrorFocus,n=++l,r=(e,t)=>{o("validation"+(!0===e?"Success":"Error"),t)},i=e=>{const t=e.validate();return"function"===typeof t.then?t.then((t=>({valid:t,comp:e})),(t=>({valid:!1,comp:e,err:t}))):Promise.resolve({valid:t,comp:e})},u=!0===e.greedy?Promise.all(s.map(i)).then((e=>e.filter((e=>!0!==e.valid)))):s.reduce(((e,t)=>e.then((()=>i(t).then((e=>{if(!1===e.valid)return Promise.reject(e)}))))),Promise.resolve()).catch((e=>[e]));return u.then((e=>{if(void 0===e||0===e.length)return n===l&&r(!0),!0;if(n===l){const{comp:t,err:o}=e[0];if(void 0!==o&&console.error(o),r(!1,t),!0===a){const t=e.find((({comp:e})=>"function"===typeof e.focus&&!1===(0,w.rU)(e.$)));void 0!==t&&t.comp.focus()}}return!1}))}function d(){l++,s.forEach((e=>{"function"===typeof e.resetValidation&&e.resetValidation()}))}function c(t){void 0!==t&&(0,S.Gu)(t);const a=l+1;u().then((n=>{a===l&&!0===n&&(void 0!==e.onSubmit?o("submit",t):void 0!==t&&void 0!==t.target&&"function"===typeof t.target.submit&&t.target.submit())}))}function m(t){void 0!==t&&(0,S.Gu)(t),o("reset"),(0,a.dY)((()=>{d(),!0===e.autofocus&&!0!==e.noResetFocus&&v()}))}function v(){(0,_.Gy)((()=>{if(null===i.value)return;const e=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),(e=>-1!==e.tabIndex));null!==e&&void 0!==e&&e.focus({preventScroll:!0})}))}(0,a.Gt)(k.q3,{bindComponent(e){s.push(e)},unbindComponent(e){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}});let g=!1;return(0,a.Y4)((()=>{g=!0})),(0,a.n)((()=>{!0===g&&!0===e.autofocus&&v()})),(0,a.sV)((()=>{!0===e.autofocus&&v()})),Object.assign(r.proxy,{validate:u,resetValidation:d,submit:c,reset:m,focus:v,getValidationComponents:()=>s}),()=>(0,a.h)("form",{class:"q-form",ref:i,onSubmit:c,onReset:m},(0,y.zm)(t.default))}}),B=o(4985),x=o(9798),C=o(6119),E=o(1030);const V={ratio:[String,Number]};function z(e,t){return(0,a.EW)((()=>{const o=Number(e.ratio||(void 0!==t?t.value:void 0));return!0!==isNaN(o)&&o>0?{paddingBottom:100/o+"%"}:null}))}var F=o(5952);const R=1.7778;var Q=(0,h.a0)({name:"QImg",props:{...V,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:R},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:o}){const r=(0,n.KR)(e.initialRatio),i=z(e,r),l=(0,a.nI)(),{registerTimeout:s,removeTimeout:u}=(0,F.A)(),{registerTimeout:d,removeTimeout:c}=(0,F.A)(),m=(0,a.EW)((()=>void 0!==e.placeholderSrc?{src:e.placeholderSrc}:null)),v=(0,a.EW)((()=>void 0!==e.errorSrc?{src:e.errorSrc,__qerror:!0}:null)),g=[(0,n.KR)(null),(0,n.KR)(m.value)],p=(0,n.KR)(0),f=(0,n.KR)(!1),h=(0,n.KR)(!1),b=(0,a.EW)((()=>`q-img q-img--${!0===e.noNativeMenu?"no-":""}menu`)),q=(0,a.EW)((()=>({width:e.width,height:e.height}))),S=(0,a.EW)((()=>"q-img__image "+(void 0!==e.imgClass?e.imgClass+" ":"")+`q-img__image--with${!0===e.noTransition?"out":""}-transition q-img__image--`)),_=(0,a.EW)((()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position})));function k(){c(),0!==e.loadingShowDelay?d((()=>{f.value=!0}),e.loadingShowDelay):f.value=!0}function A(){c(),f.value=!1}function B({target:e}){!1===(0,w.rU)(l)&&(u(),r.value=0===e.naturalHeight?.5:e.naturalWidth/e.naturalHeight,V(e,1))}function V(e,t){1e3!==t&&!0!==(0,w.rU)(l)&&(!0===e.complete?R(e):s((()=>{V(e,t+1)}),50))}function R(e){!0!==(0,w.rU)(l)&&(p.value=1^p.value,g[p.value].value=null,A(),"true"!==e.getAttribute("__qerror")&&(h.value=!1),o("load",e.currentSrc||e.src))}function Q(e){u(),A(),h.value=!0,g[p.value].value=v.value,g[1^p.value].value=m.value,o("error",e)}function W(t){const o=g[t].value,n={key:"img_"+t,class:S.value,style:_.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...o};return p.value===t?Object.assign(n,{class:n.class+"current",onLoad:B,onError:Q}):n.class+="loaded",(0,a.h)("div",{class:"q-img__container absolute-full",key:"img"+t},(0,a.h)("img",n))}function I(){return!1===f.value?(0,a.h)("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},(0,y.zm)(t[!0===h.value?"error":"default"])):(0,a.h)("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},void 0!==t.loading?t.loading():!0===e.noSpinner?void 0:[(0,a.h)(C.A,{color:e.spinnerColor,size:e.spinnerSize})])}{function K(){(0,a.wB)((()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null),(e=>{u(),h.value=!1,null===e?(A(),g[1^p.value].value=m.value):k(),g[p.value].value=e}),{immediate:!0})}!0===E.ot.value?(0,a.sV)(K):K()}return()=>{const t=[];return null!==i.value&&t.push((0,a.h)("div",{key:"filler",style:i.value})),null!==g[0].value&&t.push(W(0)),null!==g[1].value&&t.push(W(1)),t.push((0,a.h)(x.eB,{name:"q-transition--fade"},I)),(0,a.h)("div",{key:"main",class:b.value,style:q.value,role:"img","aria-label":e.alt},t)}}}),W=o(407),I=o(2110),K=o.n(I);const N=(0,v.A)(m,[["__scopeId","data-v-6631f11c"]]);var U=N;K()(m,"components",{QDialog:g.A,QCard:p.A,QCardSection:f.A,QBanner:q,QForm:A,QInput:B.A,QImg:Q,QBtn:W.A})},3663:function(e,t,o){var a=o(4220),n=o(5471),r=o(9140),i=o(1952);t.A=(0,r.a0)({name:"QCard",props:{...n.C,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=(0,a.nI)(),r=(0,n.A)(e,o),l=(0,a.EW)((()=>"q-card"+(!0===r.value?" q-card--dark q-dark":"")+(!0===e.bordered?" q-card--bordered":"")+(!0===e.square?" q-card--square no-border-radius":"")+(!0===e.flat?" q-card--flat no-shadow":"")));return()=>(0,a.h)(e.tag,{class:l.value},(0,i.zm)(t.default))}})},7180:function(e,t,o){var a=o(4220),n=o(9140),r=o(1952);t.A=(0,n.a0)({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const o=(0,a.EW)((()=>"q-card__section q-card__section--"+(!0===e.horizontal?"horiz row no-wrap":"vert")));return()=>(0,a.h)(e.tag,{class:o.value},(0,r.zm)(t.default))}})}}]);
//# sourceMappingURL=790.84d8bdbc.js.map